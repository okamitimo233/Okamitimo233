<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>我的博客仪表盘 - GSAP 增强版</title>
  <meta name="description" content="使用 GSAP 优化的个人博客仪表盘，拥有精致深色模式、弹性导航指示器和流畅的滚动动画">

  <!-- 1. 加载 Shoelace 样式 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/themes/light.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/themes/dark.css" />

  <!-- 2. 加载 Shoelace 组件脚本 -->
  <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/shoelace.js"></script>

  <!-- 3. 加载 GSAP 及其 ScrollTrigger 插件 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <!-- 4. 自定义 CSS 样式 -->
  <style>
    /* 
     * 全局设计系统
     */
    :root {
      --color-primary: #4a48e0;
      --color-primary-hover: #3b39b3;
      --color-success: #10b981;
      --color-warning: #f59e0b;
      --color-info: #3b82f6;
      --color-text-secondary: #667;
      --theme-bg: #f4f7fc;
      --theme-text: #1c1c1e;
      --theme-primary: var(--color-primary);
      --theme-card-bg: #ffffff;
      --theme-card-border: #e5e7eb;
      --theme-header-bg: rgba(244, 247, 252, 0.85);
      --theme-shadow: 0 4px 10px rgba(0,0,0,0.07);
      --theme-shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.12);
      --font-family-sans: 'Segoe UI', 'Microsoft YaHei', system-ui, sans-serif;
      --spacing-sm: 8px; --spacing-md: 16px; --spacing-lg: 24px; --spacing-xl: 32px;
      --radius-md: 8px; --radius-lg: 12px; --radius-full: 999px;
    }

    [data-theme="dark"] {
      --color-primary: #58a6ff;
      --color-primary-hover: #79c0ff;
      --color-success: #34d399;
      --color-warning: #fbbf24;
      --color-info: #60a5fa;
      --color-text-secondary: #909dab;
      --theme-bg: #0d1117;
      --theme-text: #f2f27;
      --theme-card-bg: #161b22;
      --theme-card-border: #30363d;
      --theme-header-bg: rgba(13, 17, 23, 0.85);
      --theme-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      --theme-shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    /* 基础样式 */
    *, *::before, *::after { box-sizing: border-box; }
    body { font-family: var(--font-family-sans); background-color: var(--theme-bg); color: var(--theme-text); margin: 0; line-height: 1.6; transition: background-color 0.3s ease, color 0.3s ease; overflow-x: hidden; }
    .container { max-width: 1140px; margin: 0 auto; padding: 0 var(--spacing-md); }

    /* 宏观布局 */
    .app-header { display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-sm) var(--spacing-md); height: 64px; position: sticky; top: 0; z-index: 10; background-color: var(--theme-header-bg); backdrop-filter: saturate(180%) blur(10px); -webkit-backdrop-filter: saturate(180%) blur(10px); border-bottom: 1px solid var(--theme-card-border); transition: background-color 0.3s ease, border-color 0.3s ease; }
    .header-left, .header-right { display: flex; align-items: center; gap: var(--spacing-md); }
    .blog-title { font-size: 1.5rem; font-weight: 600; text-decoration: none; color: var(--theme-text); display: flex; align-items: center; gap: 10px; }
    .blog-title sl-icon { color: var(--theme-primary); }
    .main-nav { display: none; }
    .mobile-menu-btn { display: inline-flex; }
    main { padding-top: var(--spacing-lg); }
    .blog-footer { text-align: center; padding: var(--spacing-xl) 0; margin-top: var(--spacing-xl); border-top: 1px solid var(--theme-card-border); color: var(--color-text-secondary); font-size: 0.9rem; }

    /* 页面容器 */
    .page { display: none; }
    .page.active { display: block; }

    /* 首页: 导航栏与弹簧指示器 */
    .app-nav { position: relative; display: flex; background-color: var(--theme-card-bg); padding: 6px; border-radius: var(--radius-lg); box-shadow: var(--theme-shadow); margin: var(--spacing-lg) auto 0; max-width: 500px; }
    .nav-indicator { position: absolute; top: 6px; bottom: 6px; left: 0; height: auto; background-color: var(--theme-primary); border-radius: 8px; }
    .nav-tab { flex: 1; padding: 9px 15px; text-align: center; border-radius: 8px; cursor: pointer; font-weight: 500; border: none; background-color: transparent; color: var(--color-text-secondary); transition: color 0.3s ease; z-index: 1; }
    .nav-tab.active { color: #fff; }
    .nav-tab:not(.active):hover { color: var(--theme-text); }
    
    /* 内容区 */
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* 首页: 统计卡片 */
    .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--spacing-md); margin-bottom: var(--spacing-xl); }
    .stat-card { background: var(--theme-card-bg); border-radius: var(--radius-lg); padding: var(--spacing-md); text-align: center; border-left: 4px solid; box-shadow: var(--theme-shadow); }
    .stat-card .count { font-size: 2rem; font-weight: 700; color: var(--theme-text); }
    .stat-card .label { font-size: 0.9rem; font-weight: 500; color: var(--color-text-secondary); }
    .stat-posts { border-color: var(--color-primary); } .stat-categories { border-color: var(--color-success); } .stat-tags { border-color: var(--color-warning); } .stat-comments { border-color: var(--color-info); }
    .stat-posts .count { color: var(--color-primary); } .stat-categories .count { color: var(--color-success); } .stat-tags .count { color: var(--color-warning); } .stat-comments .count { color: var(--color-info); }

    /* 通用文章卡片样式 */
    .post-card { --sl-panel-background-color: var(--theme-card-bg); --sl-panel-border-color: var(--theme-card-border); --sl-panel-border-width: 1px; border-radius: var(--radius-lg); box-shadow: var(--theme-shadow); overflow: hidden; }
    .post-card img { width: 100%; height: 220px; object-fit: cover; }
    .post-card [slot="footer"] { display: flex; justify-content: flex-end; }
    .post-card sl-button::part(base) { border-radius: var(--radius-full); }

    /* BUG FIX: 修复深色模式下 Shoelace 组件的白色分割线 */
    [data-theme="dark"] sl-card::part(header),
    [data-theme="dark"] sl-card::part(body),
    [data-theme="dark"] sl-card::part(footer) {
      border-color: var(--theme-card-border);
    }
    [data-theme="dark"] sl-details::part(header) {
      border-bottom-color: var(--theme-card-border);
    }

    /* 首页: 布局 */
    .main-content-grid { display: grid; grid-template-columns: 1fr; gap: var(--spacing-xl); }
    .posts-grid { grid-template-columns: 1fr; gap: var(--spacing-xl); }
    .posts-list-focused { display: flex; flex-direction: column; gap: var(--spacing-xl); }
    .posts-list-focused sl-details::part(base) { background-color: transparent; border: none; }
    .posts-masonry { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: var(--spacing-md); align-items: start; }
    .posts-masonry .post-card:nth-child(4n+2) { grid-row-end: span 2; }
    .sidebar-card { background-color: var(--theme-card-bg); padding: var(--spacing-lg); border: 1px solid var(--theme-card-border); border-radius: var(--radius-lg); box-shadow: var(--theme-shadow); }
    .sidebar-card .card-title { font-size: 1.25rem; font-weight: 600; margin-bottom: var(--spacing-md); }

    /* 归档页面样式 */
    .archive-timeline { position: relative; padding-left: 40px; }
    .archive-timeline::before { content: ''; position: absolute; left: 15px; top: 0; bottom: 0; width: 2px; background: var(--theme-card-border); }
    .archive-item { position: relative; margin-bottom: var(--spacing-xl); }
    .archive-item::before { content: ''; position: absolute; left: -25px; top: 5px; width: 12px; height: 12px; border-radius: 50%; background: var(--theme-primary); border: 2px solid var(--theme-card-bg); }
    .archive-year { font-size: 1.5rem; font-weight: 700; color: var(--theme-text); margin-bottom: var(--spacing-md); }
    .archive-list { list-style: none; padding: 0; margin: 0; }
    .archive-list li { padding: var(--spacing-sm) 0; border-bottom: 1px dashed var(--theme-card-border); }
    .archive-list li:last-child { border-bottom: none; }
    .archive-list a { text-decoration: none; color: var(--theme-text); font-weight: 500; transition: color 0.2s; }
    .archive-list a:hover { color: var(--theme-primary); }
    .archive-date { font-size: 0.85rem; color: var(--color-text-secondary); margin-left: var(--spacing-md); }

    /* 关于页面样式 */
    .about-container { max-width: 800px; margin: 0 auto; text-align: center; }
    .about-avatar { width: 150px; height: 150px; border-radius: 50%; margin: 0 auto var(--spacing-lg); border: 5px solid var(--theme-card-bg); box-shadow: var(--theme-shadow-hover); }
    .about-name { font-size: 2.5rem; font-weight: 700; margin-bottom: var(--spacing-sm); }
    .about-bio { font-size: 1.1rem; color: var(--color-text-secondary); margin-bottom: var(--spacing-xl); }
    .about-skills { display: flex; flex-wrap: wrap; justify-content: center; gap: var(--spacing-md); margin-bottom: var(--spacing-xl); }
    .skill-tag { background: var(--theme-card-bg); padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-full); border: 1px solid var(--theme-card-border); font-size: 0.9rem; font-weight: 500; }
    .about-socials a { text-decoration: none; color: var(--color-text-secondary); font-size: 1.5rem; margin: 0 var(--spacing-sm); transition: color 0.2s; }
    .about-socials a:hover { color: var(--theme-primary); }

    /* 抽屉导航 */
    .nav-drawer::part(panel) { background-color: var(--theme-card-bg); }
    .nav-drawer::part(header) { border-bottom: 1px solid var(--theme-card-border); }
    .nav-drawer::part(title) { font-weight: 600; display: flex; align-items: center; gap: var(--spacing-sm); }
    .nav-drawer::part(body) { padding: var(--spacing-md) 0; }
    .drawer-nav { display: flex; flex-direction: column; padding: 0 var(--spacing-md); }
    .drawer-nav sl-button { margin-bottom: var(--spacing-sm); }
    .drawer-nav sl-button::part(base) { justify-content: flex-start; border-left: 3px solid transparent; border-radius: 0 var(--radius-md) var(--radius-md) 0; transition: background-color 0.2s ease, border-color 0.2s ease; }
    .drawer-nav sl-button::part(label) { font-size: 1.05rem; transition: color 0.2s ease; }
    [data-theme="dark"] .drawer-nav sl-button.active::part(base) { background-color: rgba(88, 166, 255, 0.1); border-left-color: var(--color-primary); }
    [data-theme="dark"] .drawer-nav sl-button.active::part(label) { color: var(--color-primary); }
    [data-theme="dark"] .drawer-nav sl-button:not(.active)::part(base):hover { background-color: rgba(255, 255, 255, 0.05); }
    .drawer-footer { padding: var(--spacing-md); border-top: 1px solid var(--theme-card-border); display: flex; justify-content: center; gap: var(--spacing-lg); }
    .drawer-footer sl-icon-button { font-size: 1.4rem; }

    /* 响应式设计 */
    @media (min-width: 768px) {
      .stats-grid { grid-template-columns: repeat(4, 1fr); }
      .posts-grid { grid-template-columns: 1fr 1fr; }
    }
    @media (min-width: 992px) {
      .main-nav { display: flex; gap: var(--spacing-sm); }
      .mobile-menu-btn { display: none; }
      .main-content-grid { grid-template-columns: 2fr 1fr; }
    }

    /* GSAP 动画覆盖样式 */
    .anim-fade-in-up { opacity: 0; transform: translateY(30px); }
    .anim-stagger-card { opacity: 0; transform: translateY(50px) scale(0.95); }
  </style>
</head>
<body>

  <header class="app-header">
    <div class="header-left"><a href="#" class="blog-title" data-page="home"><sl-icon name="bar-chart-line-fill" style="font-size: 1.8rem;"></sl-icon><span>Dashboard</span></a></div>
    <div class="header-right">
      <nav class="main-nav">
        <sl-button type="text" data-page="home">首页</sl-button>
        <sl-button type="text" data-page="archive">归档</sl-button>
        <sl-button type="text" data-page="about">关于</sl-button>
      </nav>
      <sl-icon-button id="theme-toggle" name="sun" label="切换主题" style="font-size: 1.5rem;"></sl-icon-button>
      <sl-icon-button class="mobile-menu-btn" name="list" label="打开菜单" style="font-size: 1.5rem;"></sl-icon-button>
    </div>
  </header>

  <sl-drawer class="nav-drawer">
    <span slot="label"><sl-icon name="compass" style="font-size: 1.2em;"></sl-icon> 导航</span>
    <nav class="drawer-nav">
      <sl-button variant="text" size="large" data-page="home" class="active"><sl-icon slot="prefix" name="house-door-fill"></sl-icon>首页</sl-button>
      <sl-button variant="text" size="large" data-page="archive"><sl-icon slot="prefix" name="archive-fill"></sl-icon>归档</sl-button>
      <sl-button variant="text" size="large" data-page="about"><sl-icon slot="prefix" name="person-fill"></sl-icon>关于</sl-button>
    </nav>
    <footer class="drawer-footer">
      <sl-icon-button name="github" label="GitHub"></sl-icon-button>
      <sl-icon-button name="twitter-x" label="Twitter"></sl-icon-button>
      <sl-icon-button name="envelope-fill" label="Email"></sl-icon-button>
    </footer>
  </sl-drawer>

  <main class="container">
    
    <!-- 首页 -->
    <div id="home-page" class="page active">
      <nav class="app-nav" id="app-nav">
        <div class="nav-indicator"></div>
        <button class="nav-tab active" data-tab="all">全部文章</button>
        <button class="nav-tab" data-tab="tech">技术分享</button>
        <button class="nav-tab" data-tab="life">生活随笔</button>
      </nav>

      <div style="margin-top: var(--spacing-xl);">
        <section class="stats-grid">
          <div class="stat-card stat-posts anim-stagger-card"><div class="count">72</div><div class="label">总文章</div></div>
          <div class="stat-card stat-categories anim-stagger-card"><div class="count">8</div><div class="label">分类</div></div>
          <div class="stat-card stat-tags anim-stagger-card"><div class="count">45</div><div class="label">标签</div></div>
          <div class="stat-card stat-comments anim-stagger-card"><div class="count">129</div><div class="label">评论数</div></div>
        </section>

        <div class="main-content-grid">
          <div class="posts-area">
            <div id="content-all" class="tab-content active"><div class="posts-grid">
              <sl-card class="post-card anim-stagger-card"><img slot="image" src="https://t.alcy.cc/moe?v=rikka1" alt="RikkaHub 项目封面"><h2>RikkaHub: 新一代安卓应用增强框架</h2><p>RikkaHub 是一个强大的 Android 应用增强工具，它提供了一个统一的界面来管理各种需要 root 或 Shizuku 权限的模块。</p><div slot="footer"><sl-button variant="primary" pill>了解更多</sl-button></div></sl-card>
              <sl-card class="post-card anim-stagger-card"><img slot="image" src="https://t.alcy.cc/moe?v=rikka2" alt="插件化架构示意图"><h2>深度解析 RikkaHub 的插件化架构</h2><p>RikkaHub 的核心优势在于其灵活的插件化设计。所有功能均作为独立插件存在，这意味着极高的可扩展性和可维护性。</p><div slot="footer"><sl-button variant="primary" pill>深入探索</sl-button></div></sl-card>
              <sl-card class="post-card anim-stagger-card"><img slot="image" src="https://t.alcy.cc/moe?v=3" alt="文章封面图片"><h2>重温经典：那些治愈了我们青春的日常系动画</h2><p>在快节奏的生活中，不妨慢下来，回顾那些没有激烈战斗、只有温馨日常的动画。它们如同午后的阳光，温暖而治愈。</p><div slot="footer"><sl-button variant="primary" pill>阅读全文</sl-button></div></sl-card>
            </div></div>
            <div id="content-tech" class="tab-content"><div class="posts-list-focused">
              <sl-card class="post-card anim-stagger-card"><img slot="image" src="https://t.alcy.cc/moe?v=rikka2" alt="插件化架构示意图"><h2>深度解析 RikkaHub 的插件化架构</h2><p>RikkaHub 的核心优势在于其灵活的插件化设计。所有功能均作为独立插件存在，这意味着极高的可扩展性和可维护性。</p><sl-details summary="查看技术规格"><ul><li>核心依赖: Shizuku / Root</li><li>架构: C/S 架构, 插件化</li><li>UI 框架: Jetpack Compose</li></ul></sl-details><div slot="footer"><sl-button variant="primary" pill>深入探索</sl-button></div></sl-card>
            </div></div>
            <div id="content-life" class="tab-content"><div class="posts-masonry">
              <sl-card class="post-card anim-stagger-card"><img slot="image" src="https://t.alcy.cc/moe?v=life1" alt="生活照片1" style="height: 280px;"><h2>午后阳光与猫</h2><p>一个慵懒的下午，阳光正好，猫咪在窗边打盹，岁月静好。</p></sl-card>
              <sl-card class="post-card anim-stagger-card"><img slot="image" src="https://t.alcy.cc/moe?v=life2" alt="生活照片2" style="height: 400px;"><h2>一次说走就走的旅行</h2><p>整理行囊，奔赴远方。山川湖海，皆是风景。</p></sl-card>
              <sl-card class="post-card anim-stagger-card"><img slot="image" src="https://t.alcy.cc/moe?v=life3" alt="生活照片3" style="height: 320px;"><h2>深夜食堂的美食记忆</h2><p>热气腾腾的拉面，是治愈一天疲惫的最好良药。</p></sl-card>
            </div></div>
          </div>
          <aside class="sidebar">
            <!-- 已删除“设置”卡片 -->
            <div class="sidebar-card anim-fade-in-up"><div class="card-title">关于我</div><sl-avatar image="https://multimedia.nt.qq.com.cn/download?appid=1406&fileid=EhQwrV1rBkg0GQZICEWpCITfC1zZXxit8SIg_goo_dvr-vWmkAMyBHByb2RQgLsvWhAsaaiqE2Dig_kiIfp_Oje6egL3nYIBAm5q&spec=0&rkey=CAISMEpdIDT-h2V0d9u9dal7VKBZkW3IC1RBVLJGmSzoqEF6Dr79GMqEwbJN7SEJX1Dsww" label="作者头像" style="--size: 72px; margin-bottom: var(--spacing-md);"></sl-avatar><p>你好！一个热爱开源、代码和设计的探索者。</p></div>
          </aside>
        </div>
      </div>
    </div>

    <!-- 归档页 -->
    <div id="archive-page" class="page">
      <div class="archive-timeline">
        <div class="archive-item anim-fade-in-up">
          <h3 class="archive-year">2024</h3>
          <ul class="archive-list">
            <li><a href="#">RikkaHub: 新一代安卓应用增强框架</a><span class="archive-date">2024-05-20</span></li>
            <li><a href="#">深度解析 RikkaHub 的插件化架构</a><span class="archive-date">2024-05-18</span></li>
            <li><a href="#">重温经典：那些治愈了我们青春的日常系动画</a><span class="archive-date">2024-05-15</span></li>
          </ul>
        </div>
        <div class="archive-item anim-fade-in-up">
          <h3 class="archive-year">2023</h3>
          <ul class="archive-list">
            <li><a href="#">探索 Web Components 的未来</a><span class="archive-date">2023-11-22</span></li>
            <li><a href="#">使用 Tailwind CSS 构建响应式布局</a><span class="archive-date">2023-09-10</span></li>
            <li><a href="#">JavaScript 异步编程详解</a><span class="archive-date">2023-08-01</span></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- 关于页 -->
    <div id="about-page" class="page">
      <div class="about-container">
        <img src="https://multimedia.nt.qq.com.cn/download?appid=1406&fileid=EhQwrV1rBkg0GQZICEWpCITfC1zZXxit8SIg_goo_dvr-vWmkAMyBHByb2RQgLsvWhAsaaiqE2Dig_kiIfp_Oje6egL3nYIBAm5q&spec=0&rkey=CAISMEpdIDT-h2V0d9u9dal7VKBZkW3IC1RBVLJGmSzoqEF6Dr79GMqEwbJN7SEJX1Dsww" alt="我的头像" class="about-avatar anim-stagger-card">
        <h1 class="about-name anim-stagger-card">一个热爱探索的开发者</h1>
        <p class="about-bio anim-stagger-card">专注于前端开发、UI/UX 设计与开源项目。致力于创造优雅、高效且富有创意的 Web 应用。</p>
        <div class="about-skills anim-stagger-card">
          <span class="skill-tag">HTML5</span>
          <span class="skill-tag">CSS3</span>
          <span class="skill-tag">JavaScript (ES6+)</span>
          <span class="skill-tag">Vue.js / React</span>
          <span class="skill-tag">GSAP</span>
          <span class="skill-tag">Node.js</span>
          <span class="skill-tag">UI/UX Design</span>
        </div>
        <div class="about-socials anim-stagger-card">
          <a href="#"><sl-icon name="github"></sl-icon></a>
          <a href="#"><sl-icon name="twitter-x"></sl-icon></a>
          <a href="#"><sl-icon name="linkedin"></sl-icon></a>
          <a href="#"><sl-icon name="envelope-fill"></sl-icon></a>
        </div>
      </div>
    </div>

  </main>

  <footer class="blog-footer"><p>&copy; 2025 我的博客仪表盘. All Rights Reserved.</p></footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      gsap.registerPlugin(ScrollTrigger);

      const themeToggle = document.getElementById('theme-toggle');
      const html = document.documentElement;
      let isThemeTransitioning = false;

      // --- 优化后的 GSAP 主题切换逻辑 ---
      themeToggle.addEventListener('click', (event) => {
        if (isThemeTransitioning) return;
        isThemeTransitioning = true;
        
        const isDark = html.getAttribute('data-theme') === 'dark';
        const newTheme = isDark ? 'light' : 'dark';
        const targetBg = isDark ? '#f4f7fc' : '#0d1117';
        
        const ripple = document.createElement('div');
        ripple.style.position = 'fixed';
        ripple.style.borderRadius = '50%';
        ripple.style.background = targetBg;
        ripple.style.width = '0px';
        ripple.style.height = '0px';
        ripple.style.top = `${event.clientY}px`;
        ripple.style.left = `${event.clientX}px`;
        ripple.style.transform = 'translate(-50%, -50%)';
        ripple.style.zIndex = '9999';
        document.body.appendChild(ripple);

        const tl = gsap.timeline({
          onComplete: () => {
            ripple.remove();
            themeToggle.name = isDark ? 'sun' : 'moon';
            isThemeTransitioning = false;
          }
        });

        tl.to(ripple, {
          duration: 0.8,
          width: '250vmax',
          height: '250vmax',
          ease: "power4.inOut"
        })
        .set(html, { attr: { 'data-theme': newTheme } }, 0.32);
      });

      // --- 简单的前端路由系统 ---
      const pages = {
        home: document.getElementById('home-page'),
        archive: document.getElementById('archive-page'),
        about: document.getElementById('about-page')
      };
      const navLinks = document.querySelectorAll('[data-page]');
      
      function switchPage(pageName) {
        const currentPage = document.querySelector('.page.active');
        const nextPage = pages[pageName];

        if (currentPage === nextPage) return;

        navLinks.forEach(link => {
          link.classList.toggle('active', link.dataset.page === pageName);
        });

        const tl = gsap.timeline();
        tl.to(currentPage, {
          duration: 0.3,
          opacity: 0,
          y: -20,
          onComplete: () => {
            currentPage.classList.remove('active');
            nextPage.classList.add('active');
            ScrollTrigger.refresh();
          }
        })
        .fromTo(nextPage, 
          { opacity: 0, y: 20 },
          { duration: 0.4, opacity: 1, y: 0, ease: "power2.out" }
        );
      }

      navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const pageName = link.dataset.page;
          switchPage(pageName);
          const drawer = document.querySelector('.nav-drawer');
          if (drawer.open) {
            drawer.hide();
          }
        });
      });

      // --- 移动端抽屉导航逻辑 ---
      const drawer = document.querySelector('.nav-drawer');
      const openButton = document.querySelector('.mobile-menu-btn');
      openButton.addEventListener('click', () => drawer.show());

      // --- 首页: GSAP 增强的导航栏弹簧指示器 & 内容切换 ---
      const appNav = document.getElementById('app-nav');
      const navIndicator = appNav.querySelector('.nav-indicator');
      const navTabs = appNav.querySelectorAll('.nav-tab');
      const tabContents = document.querySelectorAll('.tab-content');

      gsap.set(navIndicator, {
        width: navTabs[0].offsetWidth,
        x: navTabs[0].offsetLeft
      });

      navTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          if (tab.classList.contains('active')) return;

          const currentActiveTab = appNav.querySelector('.nav-tab.active');
          const currentContent = document.querySelector('.tab-content.active');
          const newContentId = `content-${tab.dataset.tab}`;
          const newContent = document.getElementById(newContentId);

          currentActiveTab.classList.remove('active');
          tab.classList.add('active');

          const tl = gsap.timeline();
          tl.to(navIndicator, {
            duration: 0.6,
            width: tab.offsetWidth,
            x: tab.offsetLeft,
            ease: "elastic.out(1, 0.5)"
          });

          if (currentContent) {
            tl.to(currentContent, {
              duration: 0.3,
              opacity: 0,
              y: -10,
              onComplete: () => {
                currentContent.classList.remove('active');
                currentContent.style.opacity = 1;
                currentContent.style.transform = 'translateY(0)';
              }
            }, "<");
          }

          if (newContent) {
            newContent.classList.add('active');
            gsap.fromTo(newContent, 
              { opacity: 0, y: 10 },
              { duration: 0.4, opacity: 1, y: 0, ease: "power2.out" }
            );
          }
        });
      });

            // --- GSAP ScrollTrigger 滚动动画 ---
      const animElements = gsap.utils.toArray('.anim-stagger-card, .anim-fade-in-up');
      animElements.forEach(el => {
        gsap.fromTo(el, 
          el.classList.contains('anim-fade-in-up') 
            ? { y: 30, opacity: 0 }
            : { y: 50, opacity: 0, scale: 0.98 },
          {
            y: 0,
            opacity: 1,
            scale: 1,
            duration: 0.6,
            ease: "power2.out",
            scrollTrigger: {
              trigger: el,
              start: "top 85%",
              toggleActions: "play none none reverse"
            }
          }
        );
      });

      // 统计卡片错开动画
      gsap.fromTo(".stats-grid .anim-stagger-card", 
        { y: 50, opacity: 0, scale: 0.95 },
        {
          y: 0,
          opacity: 1,
          scale: 1,
          duration: 0.6,
          ease: "power2.out",
          stagger: 0.1,
          scrollTrigger: {
            trigger: ".stats-grid",
            start: "top 85%",
          }
        }
      );

      // --- GSAP 微交互：文章卡片悬停效果 ---
      const postCards = document.querySelectorAll('.post-card');
      postCards.forEach(card => {
        card.addEventListener('mouseenter', () => {
          gsap.to(card, {
            duration: 0.3,
            y: -6,
            boxShadow: "0 12px 30px rgba(0, 0, 0, 0.15)",
            ease: "power2.out"
          });
        });
        card.addEventListener('mouseleave', () => {
          gsap.to(card, {
            duration: 0.3,
            y: 0,
            boxShadow: "0 4px 10px rgba(0,0,0,0.07)",
            ease: "power2.out"
          });
        });
      });

    });
  </script>

</body>
</html>